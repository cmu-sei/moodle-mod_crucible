define(["jquery","core/config","core/log"],function(a,b,c){function d(){a.ajax({url:b.wwwroot+"/mod/crucible/extendevent.php",type:"POST",data:{sesskey:b.sesskey,id:e},headers:{"Cache-Control":"no-cache",Expires:"-1"},success:function(a){console.log("extended lab"),console.log(a),window.location.replace(window.location.href)},error:function(a){console.log("extend-event request failed"),alert("extend-event request failed"),console.log(a),c.debug("moodle-mod_crucible-extend-event: ".request)}})}var e;return{init:function(a,b){e=b;var c=document.getElementById("extend-event");c&&(c.onclick=function(){d()},console.log("set event for extend-event button")),setInterval(function(){var b=Math.round((new Date).getTime()/1e3),c=a-b;0===c&&(console.log("timer expired, reloading page"),window.location.replace(window.location.href))},1e3)},countdown:function(a){setInterval(function(){var b=Math.round((new Date).getTime()/1e3),c=a-b;0===c&&(console.log("timer expired, reloading page"),window.location.replace(window.location.href));var d=Math.floor(c%86400/3600),e=Math.floor(c%3600/60),f=Math.floor(c%60),g=document.getElementById("timer");g&&(g.innerHTML="Timer: "+d.toString().padStart(2,"0")+":"+e.toString().padStart(2,"0")+":"+f.toString().padStart(2,"0"))},1e3)},countup:function(a){setInterval(function(){var b=Math.round((new Date).getTime()/1e3),c=b-a,d=Math.floor(c%86400/3600),e=Math.floor(c%3600/60),f=Math.floor(c%60),g=document.getElementById("timer");g&&(g.innerHTML="Timer: "+d.toString().padStart(2,"0")+":"+e.toString().padStart(2,"0")+":"+f.toString().padStart(2,"0"))},1e3)}}});